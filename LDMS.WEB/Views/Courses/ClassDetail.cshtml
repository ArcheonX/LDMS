
@{
    ViewData["Title"] = "Class Information";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section NavHeader{
    <h3 class="text-themecolor m-b-0 m-t-0">I-Manage</h3>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="javascript:void(0)">I-Manage</a></li>
        <li class="breadcrumb-item active">I-Manage Class Information</li>
    </ol>
}
@model LDMS.ViewModels.LDMS_T_Class;
<div class="panel panel-primary" style="margin-top:-15px;width:100%;">
    <form id="frmCourseDetailEditor">
        <div class="panel-body" style="width:100%;">
            <div class="form-horizontal" style="margin-right: 25px; margin-left: -25px; margin-top: 25px">
                <div class="row form-group">
                    <div class="col-sm-1 col-md-3">
                        <h4><span class="pull-right">Class Infomation</span></h4>
                    </div>
                    <div class="col-sm-1 col-md-1 offset-7">
                        <a id="btnSavePlatform" class="btn btn-success waves-effect waves-light" style="width:90%; color:white">Save</a>
                    </div>
                    <div class="col-sm-1 col-md-1" style="margin-left:-25px">
                        <a id="btnBack" onclick="window.location.href = '@Url.Action("Detail", "Courses")';" class="btn btn-danger inactive waves-effect waves-light" style="width:90%; color:white">Back</a>
                    </div>
                </div>
            </div>
            <div id="divEvaluation" style="border-width:thin; border-style:solid; margin-left:20px; display:block; margin-top: 5px; margin-bottom:20px; width:95%;display:block">
            </div>
            <div class="form-horizontal" style="margin-right: 25px; margin-left: -25px; margin-top: 25px">
                @Html.AntiForgeryToken()
                @if (Model != null)
                {
                    <input type="hidden" id="hID" name="hID" value=@Model.ID />
                }
                else
                {
                    <input type="hidden" id="hID" name="hID" value=null />
                }
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Class ID</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <input type="text"
                               title="Auto Gen"
                               id="txtCourseID"
                               asp-for="ClassID"
                               disabled="disabled"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Course Name</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <input type="text"
                               id="txtCourseName"
                               disabled="disabled"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Instructor</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <input type="hidden" id="hInstructorID" name="hInstructorID" value=null />
                        <input type="text"
                               id="txtInstructor"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <a id="findInstructor" class="btn" onclick="OpenModalInstructor()"><i class="fa fa-search"></i> </a>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Capacity</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <input type="text"
                               id="txtCapacity"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>

                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Class Fee</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <input type="text"
                               id="txtClassFee"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>

                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Free Per Person</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <input type="text"
                               id="txtFreePerson"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>

                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Learning Date</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input id="dteLearningDateFrm" type="datetime" class="form-control" style="width: 100%" />
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input id="timeFrom" type="time" class="form-control" style="width: 100%" />
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <span class="pull-right">
                            <label class="LabelCaption">To</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input id="dteLearningDateTo" type="datetime" class="form-control" style="width: 100%" />
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input id="timeTo" type="time" class="form-control" style="width: 100%" />
                    </div>

                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Register Date</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input id="dteRegisterDateFrm" type="datetime" class="form-control" style="width: 100%" />
                    </div>

                    <div class="col-sm-2 col-md-2">
                        <input id="dteRegisterDateTo" type="datetime" class="form-control" style="width: 100%" />
                    </div>

                </div>
            </div>
            <div class="form-horizontal" style="margin-right: 25px; margin-left: -25px; margin-top: 25px">
                <div class="row form-group">
                    <div class="col-sm-1 col-md-2">
                        <h4 style="font-size:large"><span class="pull-right">Venue</span></h4>
                    </div>
                    <div class="col-sm-1 col-md-1 offset-7"></div>
                </div>
            </div>
            <div class="form-horizontal" style="margin-right: 25px; margin-left: -25px; margin-top: 25px">
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Plant</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <select id="selectPlant"
                                name="selectPlant"
                                title="Please Enter Plant"
                                class="form-control required"
                                style="width: 100%">
                        </select>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-left">
                            <label class="LabelCaption">Place and Location</label>
                        </span>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Room</label>
                        </span>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <select id="selectRoom"
                                name="selectRoom"
                                title="Please Enter Room"
                                class="form-control required"
                                style="width: 100%">
                        </select>
                    </div>

                    <div class="col-sm-5 col-md-5">
                        <input type="text"
                               id="txtPlace"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                </div>
            </div>
            <div class="form-horizontal" style="margin-right: 25px; margin-left: -25px; margin-top: 25px">
                <div class="row form-group">
                    <div class="col-sm-1 col-md-3">
                        <h4><span class="pull-right">Evaluation Criteria</span></h4>
                    </div>
                    <div class="col-sm-1 col-md-1 offset-7">

                    </div>
                    <div class="col-sm-1 col-md-1" style="margin-left:-25px">

                    </div>
                </div>
            </div>

            <div id="divEvaluation" style="border-width:thin; border-style:solid; margin-left:20px; display:block; margin-top: 5px; margin-bottom:20px; width:95%;display:block">
            </div>
            <div class="form-horizontal" style="margin-right: 25px; margin-left: -25px; margin-top: 25px">
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Attend</label>
                        </span>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <input type='checkbox'
                               name='chkAttend'
                               value='chkAttend'
                               id="chkAttend"
                               onclick="" /><label for="chkAttend" style="top:4px"> </label>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <span class="pull-right">
                            <label class="LabelCaption">Test</label>
                        </span>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <input type='checkbox'
                               name='chkTest'
                               value='chkTest'
                               id="chkTest"
                               onclick="" /><label for="chkTest" style="top:4px"> </label>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <span class="pull-right">
                            <label class="LabelCaption">Skill</label>
                        </span>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <input type='checkbox'
                               name='chkSkill'
                               value='chkSkill'
                               id="chkSkill"
                               onclick="" /><label for="chkSkill" style="top:4px"> </label>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <span class="pull-right">
                            <label class="LabelCaption">Coaching</label>
                        </span>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <input type='checkbox'
                               name='chkCoaching'
                               value='chkCoaching'
                               id="chkCoaching"
                               onclick="" /><label for="chkCoaching" style="top:4px"> </label>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <span class="pull-right">
                            <label class="LabelCaption">Certificate</label>
                        </span>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <input type='checkbox'
                               name='chkCert'
                               value='chkCert'
                               id="chkCert"
                               onclick="" /><label for="chkCert" style="top:4px"> </label>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Scan</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input type="text"
                               id="txtScan"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Test Full Score</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input type="text"
                               id="txtTestFullScore"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                    <div class="col-sm-1 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">% Pass</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input type="text"
                               id="txtPercentTestPass"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Skill Full Score</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input type="text"
                               id="txtSkillFullScore"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                    <div class="col-sm-1 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">% Pass</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input type="text"
                               id="txtPercentSkillPass"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Certification</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input type="text"
                               id="txtCertification"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Add Certificate</label>
                        </span>
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <input type='checkbox'
                               name='chkCertification'
                               value='chkCertificationd'
                               id="chkCertificationd"
                               onclick="" /><label for="chkCertificationd" style="top:4px"> </label>
                    </div>

                </div>
                <div class="row form-group">
                    <div class="col-sm-2 col-md-2">
                        <span class="pull-right">
                            <label class="LabelCaption">Reminder Duratioin</label>
                        </span>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <input type="text"
                               id="txtReDuratioin"
                               style="width: 100%"
                               class="form-control input-sm" />
                    </div>

                    <div class="col-sm-1 col-md-1">
                        <span class="pull-left">
                            <label class="LabelCaption">Day</label>
                        </span>
                    </div>
                </div>

            </div>
    </form>


    <div class="modal" id="modSearhInstructor" tabindex="-1" role="dialog" aria-labelledby="modAlertLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg" style="background-color:white;border-radius:2%;width:150%">
            <div class="modal-content" style="margin-top:100px;width:120%">
                <div class="modal-header card-header">
                    <h4 class="modal-title" id="lblMATiltle">Search Instructor</h4>
                </div>
                <div class="modal-body" style="min-height:20px">
                    <div class="form-horizontal" style="margin-top:20px">
                        <div class="row form-group" style="margin-top:10px">
                            <div class="col-sm-2 col-md-2">
                                <span class="pull-right">
                                    <label class="LabelCaption">Instructor ID</label>
                                </span>
                            </div>
                            <div class="col-sm-2 col-md-4">
                                <input type="text" id="txtFilterInstructorID" class="form-control input-sm" required />
                            </div>
                            <div class="col-sm-2 col-md-2">
                                <span class="pull-right">
                                    <label class="LabelCaption">Instructor Name</label>
                                </span>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <input type="text" id="txtFilterInstructorName" class="form-control input-sm" />
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col-sm-2 col-md-2">
                                <span class="pull-right" style="vertical-align:middle">
                                    <label class="LabelCaption">Type</label>
                                </span>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <select id="selectInstructorType"
                                        name="selectInstructorType"
                                        title="Please Enter Type"
                                        class="form-control required"
                                        style="width: 100%">
                                </select>
                            </div>
                            <div class="col-sm-2 col-md-2">
                                <span class="pull-right" style="vertical-align:middle">
                                    <label class="LabelCaption">Organization</label>
                                </span>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <input type="text" id="txtFilterOrg" class="form-control input-sm" />
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col-sm-2 col-md-2">
                                <span class="pull-right" style="vertical-align:middle">
                                    <label class="LabelCaption">Experience</label>
                                </span>
                            </div>
                            <div class="col-sm-10 col-md-10">
                                <input type="text" id="txtFilterExperience" class="form-control input-sm" />
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col-sm-1 col-md-2 offset-10" style="margin-left:25rem; margin-top:20px">
                                <a id="btnSearch" class="btn btn-sm btn-primary waves-effect waves-light" style="width:100%; color:white" onclick="SearchInstructor();"> Search </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="table-responsive" style="overflow-y:auto; height:300px">
                        <table class="table table-striped table-hover table-fixed" id="dtInstructor" style="padding-top:5px">
                            <thead style="background-color:#1e88e5;color:#ffffff" class="sticky-top">
                                <tr>
                                    <!--<th style="text-align:center;width:100px">No</th>-->
                                    <th style="text-align:center">Instructor ID</th>
                                    <th style="text-align:center">Instructor Name</th>
                                    <th style="text-align:center">Type</th>
                                    <th style="text-align:center">Organization</th>
                                    <th > Select
                                        <!--<input type='checkbox'
                                           name='selectIns_all'
                                           value='selectIns_all'
                                           id="selectIns_all"
                                           onclick="checkInstructorAll(this)" /><label for="selectIns_all" style="top:15px"> </label>-->
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row form-group" style="align-items:center">
                    <div class="col-sm-1 col-md-2 offset-10" style="margin-left:20rem; margin-top:20px">
                        <a id="btnSave" class="btn btn-sm btn-success waves-effect waves-light" style="width:100%; color:white" onclick="return SelectInstructor();"> Select </a>
                    </div>
                    <div class="col-sm-1 col-md-2" style="margin-top:20px">
                        <a id="btnClose" class="btn btn-sm btn-danger inactive waves-effect waves-light" style="width:90%; color:white" onclick="CloseModalInstructor()">Close</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


@section Scripts{
<script type="text/javascript">
    //alert('document');
    $(document).ready(function () {

        $("input[type='datetime']").datepicker();
        $('select').select2({
            allowClear: true,
            closeOnSelect: true,
            theme: "bootstrap"
        });
    });


    /*function checkInstructorAll(e) {
            if (e.checked) {
                $(".chkSingle").each(function () {
                    if (!this.checked) { this.checked = true; }
                });
            }
            else {
                $(".chkSingle").each(function () {
                    if (this.checked) { this.checked = false; }
                });
            } 
     }*/



    function OpenModalInstructor() {
         $('#modSearhInstructor').modal('toggle');
    }

    function CloseModalInstructor() {
         $("#dtInstructor tbody > tr").remove();
         $('#modSearhInstructor').modal('hide');
    }

    function SearchInstructor() {
        alert('SearchInstructor');
        $.ajax({
            url: "/Courses/InstructorSearch",
            type: "Post",
            data: {
                    'InstructorID': $("#txtFilterInstructorID").val(),
                    'InstructorName': $("#txtFilterInstructorName").val(),
                    'Type': $("#selectInstructorType").val(),
                    'Organization':  $("#txtFilterOrg").val(),
                    'Experience': $("#txtFilterExperience").val(),
                    "__RequestVerificationToken": $('input[name=__RequestVerificationToken]').val()
            },
            success: function (e) {
                RendorInstructor(e);
            }
        })
    }

    function RendorInstructor(e) {

        //alert('RendorEmployee');
            $("#dtInstructor tbody > tr").remove();
                for (i = 0; i < e.length; i++) {
                    var row = $("<tr />");
                    $("#dtInstructor tbody").append(row);
                    //row.append('<td style="text-align:center">' + e[i].rownumber +'</td>');
                    row.append('<td style="text-align:center">' + e[i].Instructor_ID + '</td>');
                    row.append('<td style="text-align:center">' + e[i].Instructor_Name + '</td>');
                    row.append('<td style="text-align:center">' + e[i].TypeName + '</td>');
                    row.append('<td style="text-align:center">' + e[i].Organization + '</td>');
                    //row.append('<td style="text-align:center">' + e[i].Course_Experience + '</td>');
                    row.append('<input type="hidden" id="hdSelect_ID_' + i + '" name="hdSelect_ID_' + i + '" value="' + e[i].ID + '" />');
                    row.append('<input type="hidden" id="hdSelect_InstructorName_' + i + '" name="hdSelect_InstructorName_' + i + '" value="' + e[i].Instructor_Name + '" />');
                    row.append('<td style="text-align:center"><input type="checkbox" class="chkSingle" style="text-align:center; name="selectInstructor_' + i + '" value="selectInstructor_' + i + '" id="selectInstructor_' + i + '"/><label for="selectInstructor_'+ i +'"> </label> </td>');
            }

    }

    function SelectInstructor() {
            var ID = '';
            var Instructor_ID = '';
            var i = 0;
            var count = 0;
            while ($("#selectInstructor_" + i).val() === ("selectInstructor_" + i)) {
                if ($("#selectInstructor_" + i).prop("checked")) {
                    Instructor_ID = $("#hdSelect_InstructorName_" + i).val();
                    ID = $("#hdSelect_ID_" + i).val();
                    count++;
                }
                i++;
            }

            //alert(jobGradelist);
            //employeelist = employeelist.remove(employeelist.length);

                if (count > 1) {
                    alert('กรุณาเลือกได้เพียง 1 รายการ !!!!!!!!!!!');
                }
                else {
                     $('#txtInstructor').val(Instructor_ID);
                    $('#hInstructorID').val(ID);

                    CloseModalInstructor();
                }

           
        }


</script>
}
